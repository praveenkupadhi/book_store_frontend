{"ast":null,"code":"import axios from \"axios\";\nimport jwtDecode from \"jwt-decode\";\nimport { BOOK_DATA_FETCH_FAILURE, BOOK_DATA_FETCH_REQUEST, BOOK_DATA_FETCH_SUCCESS, BOOK_DATA_SEARCH_FAILURE, BOOK_DATA_SEARCH_REQUEST, BOOK_DATA_SEARCH_SUCCESS, CART_DATA_FETCH_FAILURE, CART_DATA_FETCH_REQUEST, CART_DATA_FETCH_SUCCESS } from \"./actionTypes\";\nexport const bookDataFetchRequest = () => ({\n  type: BOOK_DATA_FETCH_REQUEST\n});\nexport const bookDataFetchSuccess = booksData => ({\n  type: BOOK_DATA_FETCH_SUCCESS,\n  payload: booksData\n});\nexport const bookDataFetchFailure = message => ({\n  type: BOOK_DATA_FETCH_FAILURE,\n  payload: message\n});\nexport const bookDataFetch = () => {\n  return dispatch => {\n    dispatch(bookDataFetchRequest());\n    axios.get(\"http://localhost:3001/\").then(res => dispatch(bookDataFetchSuccess(res.data))).catch(error => dispatch(bookDataFetchFailure(error)));\n  };\n};\nexport const bookDataSearchRequest = () => ({\n  type: BOOK_DATA_SEARCH_REQUEST\n});\nexport const bookDataSearchSuccess = searchInput => ({\n  type: BOOK_DATA_SEARCH_SUCCESS,\n  payload: searchInput\n});\nexport const bookDataSearchFailure = message => ({\n  type: BOOK_DATA_SEARCH_FAILURE,\n  payload: message\n});\nexport const cartDataFetchRequest = () => ({\n  type: CART_DATA_FETCH_REQUEST\n});\nexport const cartDataFetchSuccess = booksData => ({\n  type: CART_DATA_FETCH_SUCCESS,\n  payload: booksData\n});\nexport const cartDataFetchFailure = message => ({\n  type: CART_DATA_FETCH_FAILURE,\n  payload: message\n});\nexport const cartDataFetch = () => {\n  return dispatch => {\n    dispatch(bookDataFetchRequest());\n    axios.get(\"http://localhost:3001/\").then(res => {\n      axios.post(\"http://localhost:3001/cartFind\", {\n        user_id: jwtDecode(cookies.loginToken).user._id\n      }).then(res => {\n        console.log(res.data);\n        res.data.book_ids.map(book => {\n          axios.post(\"http://localhost:3001\", {\n            book_id: book\n          }).then(res => dispatch(cartDataFetchSuccess(res.data)));\n        });\n      });\n    }).catch(error => dispatch(cartDataFetchFailure(error)));\n  };\n};","map":{"version":3,"sources":["D:/Assignments/Placements/book_store/frontend/src/components/redux/actions.js"],"names":["axios","jwtDecode","BOOK_DATA_FETCH_FAILURE","BOOK_DATA_FETCH_REQUEST","BOOK_DATA_FETCH_SUCCESS","BOOK_DATA_SEARCH_FAILURE","BOOK_DATA_SEARCH_REQUEST","BOOK_DATA_SEARCH_SUCCESS","CART_DATA_FETCH_FAILURE","CART_DATA_FETCH_REQUEST","CART_DATA_FETCH_SUCCESS","bookDataFetchRequest","type","bookDataFetchSuccess","booksData","payload","bookDataFetchFailure","message","bookDataFetch","dispatch","get","then","res","data","catch","error","bookDataSearchRequest","bookDataSearchSuccess","searchInput","bookDataSearchFailure","cartDataFetchRequest","cartDataFetchSuccess","cartDataFetchFailure","cartDataFetch","post","user_id","cookies","loginToken","user","_id","console","log","book_ids","map","book","book_id"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport {\r\n\tBOOK_DATA_FETCH_FAILURE,\r\n\tBOOK_DATA_FETCH_REQUEST,\r\n\tBOOK_DATA_FETCH_SUCCESS,\r\n\tBOOK_DATA_SEARCH_FAILURE,\r\n\tBOOK_DATA_SEARCH_REQUEST,\r\n\tBOOK_DATA_SEARCH_SUCCESS,\r\n\tCART_DATA_FETCH_FAILURE,\r\n\tCART_DATA_FETCH_REQUEST,\r\n\tCART_DATA_FETCH_SUCCESS,\r\n} from \"./actionTypes\";\r\n\r\nexport const bookDataFetchRequest = () => ({\r\n\ttype: BOOK_DATA_FETCH_REQUEST,\r\n});\r\n\r\nexport const bookDataFetchSuccess = (booksData) => ({\r\n\ttype: BOOK_DATA_FETCH_SUCCESS,\r\n\tpayload: booksData,\r\n});\r\n\r\nexport const bookDataFetchFailure = (message) => ({\r\n\ttype: BOOK_DATA_FETCH_FAILURE,\r\n\tpayload: message,\r\n});\r\n\r\nexport const bookDataFetch = () => {\r\n\treturn (dispatch) => {\r\n\t\tdispatch(bookDataFetchRequest());\r\n\t\taxios\r\n\t\t\t.get(\"http://localhost:3001/\")\r\n\t\t\t.then((res) => dispatch(bookDataFetchSuccess(res.data)))\r\n\t\t\t.catch((error) => dispatch(bookDataFetchFailure(error)));\r\n\t};\r\n};\r\n\r\nexport const bookDataSearchRequest = () => ({\r\n\ttype: BOOK_DATA_SEARCH_REQUEST,\r\n});\r\n\r\nexport const bookDataSearchSuccess = (searchInput) => ({\r\n\ttype: BOOK_DATA_SEARCH_SUCCESS,\r\n\tpayload: searchInput,\r\n});\r\n\r\nexport const bookDataSearchFailure = (message) => ({\r\n\ttype: BOOK_DATA_SEARCH_FAILURE,\r\n\tpayload: message,\r\n});\r\n\r\nexport const cartDataFetchRequest = () => ({\r\n\ttype: CART_DATA_FETCH_REQUEST,\r\n});\r\n\r\nexport const cartDataFetchSuccess = (booksData) => ({\r\n\ttype: CART_DATA_FETCH_SUCCESS,\r\n\tpayload: booksData,\r\n});\r\n\r\nexport const cartDataFetchFailure = (message) => ({\r\n\ttype: CART_DATA_FETCH_FAILURE,\r\n\tpayload: message,\r\n});\r\n\r\nexport const cartDataFetch = () => {\r\n\treturn (dispatch) => {\r\n\t\tdispatch(bookDataFetchRequest());\r\n\t\taxios\r\n\t\t\t.get(\"http://localhost:3001/\")\r\n\t\t\t.then((res) => {\r\n\t\t\t\taxios\r\n\t\t\t\t\t.post(\"http://localhost:3001/cartFind\", {\r\n\t\t\t\t\t\tuser_id: jwtDecode(cookies.loginToken).user._id,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\t\tres.data.book_ids.map((book) => {\r\n\t\t\t\t\t\t\taxios\r\n\t\t\t\t\t\t\t\t.post(\"http://localhost:3001\", { book_id: book })\r\n\t\t\t\t\t\t\t\t.then((res) => dispatch(cartDataFetchSuccess(res.data)));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch((error) => dispatch(cartDataFetchFailure(error)));\r\n\t};\r\n};\r\n"]},"metadata":{},"sourceType":"module"}