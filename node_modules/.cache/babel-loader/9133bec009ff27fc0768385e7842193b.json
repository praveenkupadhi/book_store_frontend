{"ast":null,"code":"var _jsxFileName = \"D:\\\\Assignments\\\\Placements\\\\book_store\\\\frontend\\\\src\\\\components\\\\bookStore\\\\BookStore.jsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport jwtDecode from \"jwt-decode\";\nimport { useEffect, useState } from \"react\";\nimport { useCookies } from \"react-cookie\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router\";\nimport { bookDataFetch, cartDataFetchRequest, cartDataFetchSuccess } from \"../redux/actions\";\nimport { SearchBook } from \"./SearchBook\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const BookStore = () => {\n  _s();\n\n  const filterData = useSelector(store => store.filterData);\n  const loading = useSelector(store => store.loading);\n  const dispatch = useDispatch();\n  const [cookies, setCookies] = useCookies(\"\");\n  const navigate = useNavigate();\n  useEffect(() => {\n    dispatch(bookDataFetch());\n  }, [dispatch]);\n\n  const handleClick = e => {\n    if (cookies.loginToken !== undefined) {\n      axios.post(\"http://localhost:3001/cartUpdate\", {\n        user_id: jwtDecode(cookies.loginToken).user._id,\n        book_id: e.target.id\n      }).then(res => {\n        console.log(res.status);\n      }).catch(error => console.log(error.message.split(\" \").pop()));\n      axios.post(\"http://localhost:3001/cartFind\", {\n        user_id: jwtDecode(cookies.loginToken).user._id\n      }).then(res => {\n        dispatch(cartDataCountRequest());\n        dispatch(cartDataCountSuccess(res.data !== \"\" ? res.data.book_ids.length : 0));\n      });\n    }\n\n    if (cookies.loginToken === undefined) {\n      dispatch(cartDataFetchRequest());\n      dispatch(cartDataFetchSuccess([]));\n      alert(\"login first\");\n      navigate(\"/login\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(SearchBook, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 4\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Book Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Author\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Action\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: filterData.length === 0 ? /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"No Data Found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 8\n        }, this) : filterData.map(book => {\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: book.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: book.author\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [\"\\u20B9\", book.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                id: book._id,\n                onClick: handleClick,\n                children: \"Add to cart\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 12\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 11\n            }, this)]\n          }, book._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 10\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n};\n\n_s(BookStore, \"aGn1uX/boXLHpRRSn0WD12WohN4=\", false, function () {\n  return [useSelector, useSelector, useDispatch, useCookies, useNavigate];\n});\n\n_c = BookStore;\n\nvar _c;\n\n$RefreshReg$(_c, \"BookStore\");","map":{"version":3,"sources":["D:/Assignments/Placements/book_store/frontend/src/components/bookStore/BookStore.jsx"],"names":["axios","jwtDecode","useEffect","useState","useCookies","useDispatch","useSelector","useNavigate","bookDataFetch","cartDataFetchRequest","cartDataFetchSuccess","SearchBook","BookStore","filterData","store","loading","dispatch","cookies","setCookies","navigate","handleClick","e","loginToken","undefined","post","user_id","user","_id","book_id","target","id","then","res","console","log","status","catch","error","message","split","pop","cartDataCountRequest","cartDataCountSuccess","data","book_ids","length","alert","map","book","name","author","price"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,WAAT,QAA4B,cAA5B;AACA,SACCC,aADD,EAECC,oBAFD,EAGCC,oBAHD,QAIO,kBAJP;AAKA,SAASC,UAAT,QAA2B,cAA3B;;;AAEA,OAAO,MAAMC,SAAS,GAAG,MAAM;AAAA;;AAC9B,QAAMC,UAAU,GAAGP,WAAW,CAAEQ,KAAD,IAAWA,KAAK,CAACD,UAAlB,CAA9B;AACA,QAAME,OAAO,GAAGT,WAAW,CAAEQ,KAAD,IAAWA,KAAK,CAACC,OAAlB,CAA3B;AACA,QAAMC,QAAQ,GAAGX,WAAW,EAA5B;AACA,QAAM,CAACY,OAAD,EAAUC,UAAV,IAAwBd,UAAU,CAAC,EAAD,CAAxC;AACA,QAAMe,QAAQ,GAAGZ,WAAW,EAA5B;AAEAL,EAAAA,SAAS,CAAC,MAAM;AACfc,IAAAA,QAAQ,CAACR,aAAa,EAAd,CAAR;AACA,GAFQ,EAEN,CAACQ,QAAD,CAFM,CAAT;;AAIA,QAAMI,WAAW,GAAIC,CAAD,IAAO;AAC1B,QAAIJ,OAAO,CAACK,UAAR,KAAuBC,SAA3B,EAAsC;AACrCvB,MAAAA,KAAK,CACHwB,IADF,CACO,kCADP,EAC2C;AACzCC,QAAAA,OAAO,EAAExB,SAAS,CAACgB,OAAO,CAACK,UAAT,CAAT,CAA8BI,IAA9B,CAAmCC,GADH;AAEzCC,QAAAA,OAAO,EAAEP,CAAC,CAACQ,MAAF,CAASC;AAFuB,OAD3C,EAKEC,IALF,CAKQC,GAAD,IAAS;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,MAAhB;AACA,OAPF,EAQEC,KARF,CAQSC,KAAD,IAAWJ,OAAO,CAACC,GAAR,CAAYG,KAAK,CAACC,OAAN,CAAcC,KAAd,CAAoB,GAApB,EAAyBC,GAAzB,EAAZ,CARnB;AASAxC,MAAAA,KAAK,CACHwB,IADF,CACO,gCADP,EACyC;AACvCC,QAAAA,OAAO,EAAExB,SAAS,CAACgB,OAAO,CAACK,UAAT,CAAT,CAA8BI,IAA9B,CAAmCC;AADL,OADzC,EAIEI,IAJF,CAIQC,GAAD,IAAS;AACdhB,QAAAA,QAAQ,CAACyB,oBAAoB,EAArB,CAAR;AACAzB,QAAAA,QAAQ,CACP0B,oBAAoB,CAACV,GAAG,CAACW,IAAJ,KAAa,EAAb,GAAkBX,GAAG,CAACW,IAAJ,CAASC,QAAT,CAAkBC,MAApC,GAA6C,CAA9C,CADb,CAAR;AAGA,OATF;AAUA;;AACD,QAAI5B,OAAO,CAACK,UAAR,KAAuBC,SAA3B,EAAsC;AACrCP,MAAAA,QAAQ,CAACP,oBAAoB,EAArB,CAAR;AACAO,MAAAA,QAAQ,CAACN,oBAAoB,CAAC,EAAD,CAArB,CAAR;AACAoC,MAAAA,KAAK,CAAC,aAAD,CAAL;AACA3B,MAAAA,QAAQ,CAAC,QAAD,CAAR;AACA;AACD,GA5BD;;AA8BA,sBACC;AAAA,4BACC,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,YADD,EAEEJ,OAAO,gBACP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADO,gBAGP;AAAA,8BACC;AAAA,+BACC;AAAA,kCACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,eAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFD,eAGC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHD,eAIC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJD;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,cADD,eASC;AAAA,kBACEF,UAAU,CAACgC,MAAX,KAAsB,CAAtB,gBACA;AAAA,iCACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,gBADA,GAKAhC,UAAU,CAACkC,GAAX,CAAgBC,IAAD,IAAU;AACxB,8BACC;AAAA,oCACC;AAAA,wBAAKA,IAAI,CAACC;AAAV;AAAA;AAAA;AAAA;AAAA,oBADD,eAEC;AAAA,wBAAKD,IAAI,CAACE;AAAV;AAAA;AAAA;AAAA;AAAA,oBAFD,eAGC;AAAA,mCAAMF,IAAI,CAACG,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHD,eAIC;AAAA,qCACC;AAAQ,gBAAA,EAAE,EAAEH,IAAI,CAACrB,GAAjB;AAAsB,gBAAA,OAAO,EAAEP,WAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,oBAJD;AAAA,aAAS4B,IAAI,CAACrB,GAAd;AAAA;AAAA;AAAA;AAAA,kBADD;AAYA,SAbD;AANF;AAAA;AAAA;AAAA;AAAA,cATD;AAAA;AAAA;AAAA;AAAA;AAAA,YALF;AAAA,kBADD;AAyCA,CAlFM;;GAAMf,S;UACON,W,EACHA,W,EACCD,W,EACaD,U,EACbG,W;;;KALLK,S","sourcesContent":["import axios from \"axios\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router\";\r\nimport {\r\n\tbookDataFetch,\r\n\tcartDataFetchRequest,\r\n\tcartDataFetchSuccess,\r\n} from \"../redux/actions\";\r\nimport { SearchBook } from \"./SearchBook\";\r\n\r\nexport const BookStore = () => {\r\n\tconst filterData = useSelector((store) => store.filterData);\r\n\tconst loading = useSelector((store) => store.loading);\r\n\tconst dispatch = useDispatch();\r\n\tconst [cookies, setCookies] = useCookies(\"\");\r\n\tconst navigate = useNavigate();\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(bookDataFetch());\r\n\t}, [dispatch]);\r\n\r\n\tconst handleClick = (e) => {\r\n\t\tif (cookies.loginToken !== undefined) {\r\n\t\t\taxios\r\n\t\t\t\t.post(\"http://localhost:3001/cartUpdate\", {\r\n\t\t\t\t\tuser_id: jwtDecode(cookies.loginToken).user._id,\r\n\t\t\t\t\tbook_id: e.target.id,\r\n\t\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tconsole.log(res.status);\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => console.log(error.message.split(\" \").pop()));\r\n\t\t\taxios\r\n\t\t\t\t.post(\"http://localhost:3001/cartFind\", {\r\n\t\t\t\t\tuser_id: jwtDecode(cookies.loginToken).user._id,\r\n\t\t\t\t})\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tdispatch(cartDataCountRequest());\r\n\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\tcartDataCountSuccess(res.data !== \"\" ? res.data.book_ids.length : 0)\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t}\r\n\t\tif (cookies.loginToken === undefined) {\r\n\t\t\tdispatch(cartDataFetchRequest());\r\n\t\t\tdispatch(cartDataFetchSuccess([]));\r\n\t\t\talert(\"login first\");\r\n\t\t\tnavigate(\"/login\");\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<SearchBook />\r\n\t\t\t{loading ? (\r\n\t\t\t\t<h2>Loading...</h2>\r\n\t\t\t) : (\r\n\t\t\t\t<table>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>Book Name</th>\r\n\t\t\t\t\t\t\t<th>Author</th>\r\n\t\t\t\t\t\t\t<th>Price</th>\r\n\t\t\t\t\t\t\t<th>Action</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t{filterData.length === 0 ? (\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<h3>No Data Found</h3>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\tfilterData.map((book) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<tr key={book._id}>\r\n\t\t\t\t\t\t\t\t\t\t<td>{book.name}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>{book.author}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>â‚¹{book.price}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<button id={book._id} onClick={handleClick}>\r\n\t\t\t\t\t\t\t\t\t\t\t\tAdd to cart\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}